# controllers.README

## 功能

`controllers` controllers作为请求入口，一般包含以下逻辑：
* 参数校验
* 调用service层处理核心业务逻辑
* 组装接口返回数据




## 目录划分的原则

首先按照请求类型，我们分为以下大类：
* command： 任务入口
* http：web请求入口
* mq：消息队列入口
* rpcx：rpcx请求入口



### 模块拆分

如果某个大类下对外暴露的入口比较多，我们可以继续按照模块来划分，例如`http`模块按照模块又划分为：

```
├── course
├── probe
└── user
```

如果对外暴露的入口不多，可以不用继续划分子目录（例如`mq`/`command`模块）。

----

### 接口版本拆分
关于是否要把模块下的接口拆分为v/v2版本的建议：
接口升级尽量做到平滑升级，所以不建议也不需要使用版本号区分；
如果接口升级遇到不能平滑升级的情况下，可以使用v1/v2来做区分。

```
user
    ├── v1
    └── v2
```

---

### 关于文件拆分
如果要处理的逻辑较少，可以按照功能将多个接口放到一起，比如:

```
    ├── user
        └── get.go
        └── commit.go
```

如果要处理的逻辑较多，可以按照接口维度拆分文件：

```
├── course
    ├── buycourse.go
    └── get_course_info.go
```

### 文件命名规范

文件名称简洁并能清晰表达出文件的功能，根据Go源码命名，我们推荐的命名方式是：
* 不要使用驼峰方式命名；
* 最好别用下划线，直接全小写；
* 如果文件名字比较长，全小写可读性差，可以使用`_`做连接符。
